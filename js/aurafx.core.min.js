!function(){"use strict";const t=(t,e=document)=>e.querySelector(t),e=(t,e=document)=>Array.from(e.querySelectorAll(t)),o=window.matchMedia?.("(prefers-reduced-motion: reduce)");function n(){return!!(!o||!o.matches)}function s(){const e=t("#themeBtn"),o=t("#themeLabel");function n(t){document.documentElement.setAttribute("data-theme",t),localStorage.setItem("aurafx-theme",t),o&&(o.textContent=t[0].toUpperCase()+t.slice(1))}e&&(n(function(){const t=localStorage.getItem("aurafx-theme");if(t)return t;const e=window.matchMedia?.("(prefers-color-scheme: dark)").matches;return e?"dark":"light"}()),e.addEventListener("click",()=>{n("light"===(document.documentElement.getAttribute("data-theme")||"light")?"dark":"light"),window.toast&&toast({tone:"info",title:"Theme",desc:`Switched to ${document.documentElement.getAttribute("data-theme")}.`})}))}function a(){const o=t("#cursorBtn"),s=t("#cursorLabel"),a=t("#cursor");if(!a)return;function r(t){document.documentElement.setAttribute("data-cursor",t),localStorage.setItem("aurafx-cursor",t),s&&(s.textContent="custom"===t?"Cursor: FX":"Cursor: System")}r(localStorage.getItem("aurafx-cursor")||"system"),o&&o.addEventListener("click",()=>{r("system"===(document.documentElement.getAttribute("data-cursor")||"system")?"custom":"system"),window.toast&&toast({tone:"info",title:"Cursor",desc:`Mode: ${document.documentElement.getAttribute("data-cursor")}.`})});let c=innerWidth/2,i=innerHeight/2,d=c,l=i,u=null;function m(){c+=.18*(d-c),i+=.18*(l-i),a.style.left=c+"px",a.style.top=i+"px",u=requestAnimationFrame(m)}document.addEventListener("mousemove",t=>{d=t.clientX,l=t.clientY}),n()&&m(),document.addEventListener("visibilitychange",()=>{document.hidden&&u?(cancelAnimationFrame(u),u=null):document.hidden||u||!n()||m()}),e(".ix,button,a,input,textarea,select").forEach(t=>{t.addEventListener("mouseenter",()=>document.body.classList.add("hov")),t.addEventListener("mouseleave",()=>document.body.classList.remove("hov"))})}function r(){const e=t("#prog")||t("#progressBar"),o=t("#nav")||t(".top-nav");if(!e&&!o)return;let n=!1;function s(){n||(n=!0,requestAnimationFrame(()=>{const t=Math.max(1,document.documentElement.scrollHeight-innerHeight);e&&(e.style.width=scrollY/t*100+"%"),o&&o.classList.toggle("scrolled",scrollY>40),n=!1}))}addEventListener("scroll",s,{passive:!0}),s()}function c(){const t=e(".rv,.rv-r,.rv-l,.rv-s,.stg");if(0===t.length)return;if(!n())return void t.forEach(t=>t.classList.add("vis"));const o=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&t.target.classList.add("vis")})},{threshold:.12});t.forEach(t=>o.observe(t))}function i(){const t=e('[data-af="counter"]');if(0===t.length)return;if(!n())return void t.forEach(t=>{t.querySelectorAll(".counter").forEach(t=>{t.textContent=t.dataset.v||"0"})});const o=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.querySelectorAll(".counter").forEach(t=>{const e=+t.dataset.v||0;let o=0;const n=e/93.75;!function s(){o+=n,o>=e?t.textContent=Math.round(e):(t.textContent=Math.round(o),requestAnimationFrame(s))}()}),o.unobserve(t.target))})},{threshold:.5});t.forEach(t=>o.observe(t))}let d=null;function l(){e('[data-af="tabs"]').forEach(t=>{const o=e('[data-af="tab-btn"]',t),n=e('[data-af="tab-panel"]',t);o.forEach((t,e)=>{t.addEventListener("click",()=>{o.forEach(t=>t.classList.remove("active")),n.forEach(t=>t.classList.remove("active")),t.classList.add("active"),n[e]&&n[e].classList.add("active")})})})}function u(){e('[data-af="accordion"]').forEach(t=>{const o=e('[data-af="acc-item"]',t);o.forEach(e=>{const n=e.querySelector(".acc-h")||e.querySelector('[data-af="acc-head"]'),s=e.querySelector(".acc-body")||e.querySelector('[data-af="acc-body"]');n&&s&&n.addEventListener("click",()=>{const n=e.classList.contains("open");"single"===t.dataset.mode&&o.forEach(t=>t.classList.remove("open")),e.classList.toggle("open",!n)})})})}function m(){s(),r(),n()&&(a(),c(),i()),l(),u(),console.log("âœ“ AuraFX Core initialized")}window.toast=function({tone:t="info",title:e="",desc:o="",dur:n=3e3}){d||(d=document.createElement("div"),d.id="toastRoot",d.setAttribute("role","status"),d.setAttribute("aria-live","polite"),d.style.cssText="position:fixed;top:1rem;right:1rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;",document.body.appendChild(d));const s=document.createElement("div");s.className=`toast toast-${t}`,s.setAttribute("role","error"===t?"alert":"status"),s.innerHTML=`\n            <div class="toast-title">${e}</div>\n            <div class="toast-desc">${o}</div>\n        `,d.appendChild(s),setTimeout(()=>s.classList.add("show"),10),setTimeout(()=>{s.classList.remove("show"),setTimeout(()=>s.remove(),300)},n)},window.modal=function(o){const n=t(`#${o}`);if(!n)return void console.warn(`Modal #${o} not found`);n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.classList.add("show"),document.body.style.overflow="hidden";const s=e('button,a,input,textarea,select,[tabindex]:not([tabindex="-1"])',n),a=s[0]||n,r=s[s.length-1]||n;function c(t){"Tab"===t.key&&(t.shiftKey&&document.activeElement===a?(t.preventDefault(),r.focus()):t.shiftKey||document.activeElement!==r||(t.preventDefault(),a.focus()))}function i(){n.classList.remove("show"),document.body.style.overflow="",n.removeEventListener("keydown",c),document.removeEventListener("keydown",d)}function d(t){"Escape"===t.key&&i()}a.focus();const l=n.querySelector(".close");l&&l.addEventListener("click",i,{once:!0}),n.addEventListener("keydown",c),document.addEventListener("keydown",d),n.addEventListener("click",t=>{t.target===n&&i()})},window.AuraFX={version:"1.0.0",init:m,toast:window.toast,modal:window.modal,isAnimAllowed:n,initTheme:s,initScrollProgress:r,initCustomCursor:a,initReveal:c,initCounters:i,initTabs:l,initAccordion:u},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m()}();